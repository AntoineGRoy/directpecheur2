(this.webpackJsonpdirectpecheur2=this.webpackJsonpdirectpecheur2||[]).push([[0],{29:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j}));var c=n(11),r=n.n(c),o=n(16),a=n(8),i=n(7),s=(n(19),function(e,t,n){var c,r;r="a_la_piece"===n.type_de_vente?Object(a.a)(Object(a.a)({},n),{},{quantity:n.poids_de_la_piece,minimum:n.poids_de_la_piece}):n,i.c.collection("products").add(r).then((function(e){c=e.id,i.c.collection("products").doc(e.id).set({id:e.id,isAvailable:!0},{merge:!0})})).then((function(){t(Object(a.a)(Object(a.a)({},r),{},{id:c,isAvailable:!0})),e(!1)})).catch((function(e){console.error("Error adding document: ",e)}))}),l=function(){var e=Object(o.a)(r.a.mark((function e(t,n,c){var o,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=parseInt(n,10),"minus"===c&&(o=-Math.abs(o)),console.log("VALUE****************"+o),e.next=5,i.c.collection("products").doc(t).get().then((function(e){if(e.exists)return console.log("Document data:",e.data()),e.data().quantity;console.log("No such document!")})).catch((function(e){return console.log("Error getting document:",e),"ERROR"}));case 5:a=e.sent,s=a+o,console.log("newValue= "+s),console.log("VALUE****************"+s),i.c.collection("products").doc(t).update({quantity:s}).then((function(){console.log("Quantity Value for my product successfully updated!")})).catch((function(e){console.error("Error writing document: ",e)}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(r.a.mark((function e(t,n,c,a,s,l){var u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=Math.round(Date.now()/1e3),console.log(l),d={orderUID:t,name:n.name,quantity:l,price:s,type_de_vente:n.type_de_vente,productUID:n.id,postedAt:u,sentBy:c,userUID:a},i.c.collection("orders").doc(t).collection("products").add(d).then(function(){var e=Object(o.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.id,e.next=3,i.c.collection("orders").doc(t).collection("products").doc(c).update({id:c,isAvailable:!0});case 3:console.log("product added to "+t+" "+c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error writing document: ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,c,r,o,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("REMOVE FROM ORDER"),!n){e.next=7;break}return console.log("REMOVE PRODUCT FROM ORDER"),e.next=5,i.c.collection("orders").doc(n).collection("products").doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}));case 5:e.next=9;break;case 7:console.log("error removing product from order"),console.log(n,t);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(e,t,n,c,r,o,s){var l={id:t,date:(new Date).toDateString(),status:"confirmed",username:n,address:c,phone:r,time:o,price:s};i.c.collection("orders").doc(t).set(Object(a.a)({},l),{merge:!0}).then((function(){e(!0)}))}},33:function(e,t,n){"use strict";t.a=n.p+"static/media/bluehook.8491f50b.svg"},38:function(e,t,n){},52:function(e,t,n){},60:function(e,t,n){},7:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i}));var c=n(19),r=(n(64),n(65),{apiKey:"AIzaSyAlBaCFinB-aIngyUsjgwjRxGvyrJmnA-c",authDomain:"direct-pecheur.firebaseapp.com",databaseURL:"https://direct-pecheur-default-rtdb.firebaseio.com",projectId:"direct-pecheur",storageBucket:"direct-pecheur.appspot.com",messagingSenderId:"818286468462",appId:"1:818286468462:web:6724b007647e3f9d92b57f",measurementId:"G-GJJZR103LJ"}),o=c.a.initializeApp(r).firestore(),a=c.a.auth(),i=(c.a.firestore(),c.a.storage());i.ref()},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),o=n(53),a=n.n(o),i=(n(60),n(6)),s=n(8),l=n(47),u=n(14),d=n(25),j=n(11),b=n.n(j),p=n(16),h=n(24),O=n(7);function f(e,t){return O.a.createUserWithEmailAndPassword(e,t)}function m(e,t,n,c,r,o){return O.c.collection("users").doc(O.a.currentUser.uid).set({phone:e,email:t,address:n,password:c,username:r,id:o}).then((function(){console.log("Document successfully written!"+O.a.currentUser)})).catch((function(e){console.error("Error writing document: ",e)}))}function g(e,t){return O.a.signInWithEmailAndPassword(e,t)}var x=n(76),v=n(33),y=n(2),w=function(){var e=Object(c.useState)({error:"",email:"",password:""}),t=Object(i.a)(e,2),n=t[0],r=t[1];function o(e){e.preventDefault(),console.log(n),r(Object(s.a)(Object(s.a)({},n),{},Object(h.a)({},e.target.name,e.target.value)))}function a(){return(a=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(Object(s.a)(Object(s.a)({},n),{},{error:""})),e.prev=2,e.next=5,g(n.email.toLowerCase(),n.password);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r({error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(y.jsx)("h1",{children:"Login to Chatty Cats"}),Object(y.jsxs)("form",{onSubmit:function(e){return a.apply(this,arguments)},children:[Object(y.jsx)("div",{children:Object(y.jsx)("input",{style:{fontSize:24,height:32,width:"auto",padding:12,margin:"1rem"},placeholder:"Email",name:"email",type:"email",onChange:o,value:n.email})}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{style:{fontSize:24,height:32,width:"auto",padding:12,margin:"1rem"},placeholder:"Password",name:"password",onChange:o,value:n.password,type:"password"})}),Object(y.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[n.error?Object(y.jsx)("p",{children:n.error}):null,Object(y.jsx)(x.a.button,{style:{background:"rebeccapurple",color:"white",border:0,borderRadius:12,paddingTop:7,margin:24,fontSize:24,cursor:"pointer"},whileHover:{scale:1.2},type:"submit",children:Object(y.jsx)("img",{alt:"login",style:{height:"3rem"},src:v.a})})]}),Object(y.jsx)("hr",{}),Object(y.jsxs)("p",{children:["Don't have an account? ",Object(y.jsx)(d.b,{to:"/signup",children:"Sign up"})]})]})]})},S=(n(71),n.p+"static/media/hook.923c7084.svg"),k=function(){return Object(y.jsx)("div",{classsName:"home-container",style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:Object(y.jsxs)(x.a.div,{style:{textAlign:"center"},initial:{y:500,color:"#000"},animate:{y:-20,color:["#552B72","#8A2E60","#CECE66","#FFFFFF"]},transition:{duration:1.5,delay:.1},children:[" ",Object(y.jsx)("div",{style:{marginTop:"2rem"},children:Object(y.jsx)("img",{width:"250px",src:S})}),Object(y.jsx)("h1",{style:{color:"rgba(59, 89, 147, 1)"},children:"Bienvenue chez Direct-P\xeacheur!"}),Object(y.jsx)(d.b,{className:"button-style-link",to:"/signup",style:{textDecoration:"none",margin:12,padding:12,borderRadius:12,background:"rgba(59, 89, 147, 1)",color:"white",fontSize:"2rem"},children:"S'inscrire"}),Object(y.jsx)(d.b,{className:"button-style-link",to:"/login",style:{textDecoration:"none",margin:12,padding:12,borderRadius:12,background:"white",border:"2px solid rgba(59, 89, 147, 1)",color:"rgba(59, 89, 147, 1)",fontSize:"2rem"},children:"Entrer"})]})})},C=n(37),_=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["non"],c=O.c.collection("products_types"),e.next=4,c.get().then((function(e){return e.forEach((function(e){e.exists?n.push(e.data().nom):console.log("No such document!")})),n}));case 4:r=e.sent,console.log(r),t(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O.c.collection("products_types").doc(n),e.next=3,c.get().then((function(e){var n=e.data();e.exists?(console.log("Document data:",e.data()),console.log("Document data:",e.data()),r={minimum:n.minimum,name:n.nom,img_url:"https://firebasestorage.googleapis.com/v0/b/".concat(O.b.storageBucket,"/o/").concat(n.default_image_url,"?alt=media"),type_de_vente:n.vente,prix_au_kilo:n.prix_au_kilo},t(r)):console.log("No such document!")}));case 3:e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){O.c.collection("users").doc(O.a.currentUser.uid).get().then((function(t){if(t.exists){console.log("Document data:",t.data());var n=t.data();e(Object(s.a)({},n))}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))},D=Object(c.createContext)(),N=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,77))})),A=function(e){var t=e.setNewOrderAlert,n=e.setTotalPrice,r=e.userInfos,o=e.products,a=e.order,s=e.setOrder,l=e.orderUID,u=e.setOrderUID;console.log(o);var d=Object(c.useState)(!1),j=Object(i.a)(d,2),b=j[0],p=j[1];return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[o&&null!==o[0]&&o.map((function(e,c){return Object(y.jsx)(N,{setNewOrderAlert:t,username:r.username,userUID:r.userUID,detailsAreShown:b,setDetailsAreShown:p,setTotalPrice:n,userInfos:r,product:e,order:a,setOrder:s,orderUID:l,setOrderUID:u,contactUID:e},e+c+"key")})),!o&&Object(y.jsx)("p",{children:"loading..."})]})},"product-list")},R=n(29),P=(n(38),n.p,function(e){var t=e.index,n=e.product,r=e.orderUID,o=e.setTotalPrice,a=e.setOrder;console.log(n),console.log(r);var s=Object(c.useContext)(D),l=(s.userInfos,s.setUserInfos,Object(c.useState)(null)),u=Object(i.a)(l,2),d=(u[0],u[1]),j=Object(c.useState)(!1),b=Object(i.a)(j,2),p=(b[0],b[1],Object(c.useState)(null)),h=Object(i.a)(p,2);h[0],h[1];return console.log(n),Object(c.useEffect)((function(){console.log("PROD IN ORDER"),console.log(n),n.name&&(n.name.length>12?(d(300/n.name.length),o((function(e){return e+n.price}))):d(22))}),[n]),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{children:["a_la_piece"===n.type_de_vente?Object(y.jsxs)("h3",{children:["1 ",n.name," de ",n.quantity,"g --- ",n.price," \u20ac"]}):Object(y.jsxs)("h3",{children:[n.quantity,"g de ",n.name," ",Object(y.jsxs)("b",{children:[n.price,"\u20ac"]})]}),Object(y.jsx)("span",{style:{border:"2px solid orange",marginTop:14,padding:4,cursor:"pointer",pointerEvents:"auto",fontWeight:"bold"},onClick:function(){Object(R.d)(n.id,r),console.log(n.productUID),Object(R.e)(n.productUID,n.quantity,"plus"),o((function(e){return e-n.price})),a((function(e){return e.splice(t,1)})),console.log("click")},children:"X retirer"})]})})}),U=n(19),T=function(e){var t=e.newOrderAlert,n=e.userInfos,r=(e.setOrderUID,e.orderUID),o=e.order,a=e.setOrder,l=e.totalPrice,u=e.setTotalPrice,d=Object(c.useState)(!1),j=Object(i.a)(d,2),b=j[0],p=j[1],h=Object(c.useState)(" Ce soir entre 18H00 et 20H00"),f=Object(i.a)(h,2),m=f[0],g=f[1],x=Object(c.useState)(""),v=Object(i.a)(x,2),w=v[0],S=v[1],k=Object(c.useState)(!1),C=Object(i.a)(k,2),_=C[0],I=C[1],E=Object(c.useState)(!1),D=Object(i.a)(E,2),N=D[0],A=D[1];return console.log(o),Object(c.useEffect)((function(){console.log("GETTING A NEW ORDER");var e=!0,t=[];"initial"!==r&&O.c.collection("orders").doc(r).collection("products").get().then((function(n){n.forEach((function(e){o.includes(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))||t.push(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))})),e&&(a([].concat(t)),console.log("ORDER ORDER!"))}));return function(){e=!1}}),[t]),Object(y.jsxs)("div",{children:[b&&Object(y.jsxs)("div",{style:{fontSize:24,postion:"absolute",width:"90vw",height:"90vh",textAlign:"center"},children:["Merci! ",Object(y.jsx)("br",{}),"Nous avons bien re\xe7u votre commande!"]}),Object(y.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[o.length<1&&Object(y.jsx)("h2",{children:"Fa\xeetes votre choix..."}),console.log(o),n&&r&&o[0]&&t&&o.map((function(e,t){return Object(y.jsx)(P,{index:t,setTotalPrice:u,product:e,setOrder:a,orderUID:r},e+t+"key")}))]}),Object(y.jsxs)("div",{style:{margin:"32px auto",width:"90vw"},children:[Object(y.jsxs)("h2",{children:["Total du Jour: ",l,"\u20ac"]})," "]}),l>0?Object(y.jsxs)("div",{style:{width:"90vw",margin:"0 auto",textAlign:"center"},children:[Object(y.jsxs)("div",{style:{margin:16},children:["Livrer \xe0 ",Object(y.jsx)("h3",{children:w||n.address}),Object(y.jsx)("span",{style:{border:"1px black solid",background:"skyblue",padding:4,cursor:"pointer"},onClick:function(){I(!0)},children:"Changer"})]}),_&&Object(y.jsxs)("div",{children:[Object(y.jsx)("input",{type:"text",name:"address",onChange:function(e){S(e.target.value)},value:w}),Object(y.jsx)("button",{onClick:function(){I(!1),console.log(w)},children:"Confirmer"})]}),Object(y.jsxs)("div",{style:{margin:16},children:["Heure de livraison ",Object(y.jsx)("h3",{children:m})," ",Object(y.jsx)("span",{style:{border:"1px black solid",background:"skyblue",padding:4,cursor:"pointer"},onClick:function(){A(!0)},children:"Changer"})]}),N&&Object(y.jsxs)("div",{children:[Object(y.jsx)("input",{type:"text",name:"address",onChange:function(e){g(e.target.value)},value:m}),Object(y.jsx)("button",{onClick:function(){A(!1),console.log(m)},children:"Confirmer"})]}),Object(y.jsx)("button",{style:{cursor:"pointer",padding:"1rem",color:"white",fontSize:16,fontWeight:"bold",borderRadius:8,border:0,background:"rgba(59, 89, 147, 1)"},onClick:function(){var e=""!==w?w:n.address;Object(R.c)(p,r,n.username,e,n.phone,m,l)},children:"Passer ma Commande"})]}):null]})},z=n.p+"static/media/exit.2b0e4681.svg";var W=function(){return Object(y.jsxs)("div",{style:{width:150,height:"1rem",margin:"1rem",textAlign:"center",cursor:"pointer"},onClick:function(){O.a.signOut().then((function(){c.useHistory.push("/login")})).catch((function(e){console.log(e)}))},children:[Object(y.jsx)("img",{style:{height:"1rem",margin:".5rem",transform:"translateY(50%)"},alt:"logout",src:z}),"Log Out"]})};n(72);n.p,n.p;var L=function(e){return e.userInfos,Object(y.jsx)("div",{className:"actionsNav",style:{display:"flex",justifyContent:"left",alignItems:"baseline",flexDirection:"column",padding:"0 1rem"},children:Object(y.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"baseline",flexDirection:"row",width:"100%"},children:Object(y.jsx)(W,{})})})},F=(n(52),function(e){var t=e.product,n=Object(c.useState)(!0),r=Object(i.a)(n,2),o=r[0],a=r[1],s=Object(c.useState)(null),l=Object(i.a)(s,2),u=l[0],d=l[1];function j(){return(j=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=Object(c.useCallback)((function(){t.name&&(t.name.length>12?d(300/t.name.length):d(22))}),[t.name]);return Object(c.useEffect)(h,[t.name,t.img_url]),Object(y.jsx)("div",{style:{minWidth:200,border:"1px solid black",padding:16,borderRadius:8},children:o&&Object(y.jsxs)("div",{onClick:function(){return j.apply(this,arguments)},children:[t.img&&Object(y.jsx)("img",{src:t.img_url,height:64}),Object(y.jsx)("h2",{style:{fontSize:u},className:"name",children:t.name}),Object(y.jsxs)("h2",{style:{fontSize:u},className:"name",children:["Quantit\xe9:",t.quantity/1e3,"Kg"]}),Object(y.jsxs)("h2",{style:{fontSize:u},className:"name",children:[t.prix_au_kilo,"\u20ac/Kg"]}),Object(y.jsx)("div",{style:{width:"100%",textAlign:"center"},children:Object(y.jsx)("button",{style:{margin:"0 auto",cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.c.collection("products").doc(t.id).delete().then((function(){a(!1),console.log("Document successfully deleted!")}));case 2:case"end":return e.stop()}}),e)}))),children:"Retirer"})})]})})}),M=function(e){var t,n=e.setShowAddPanel,r=Object(c.useState)(""),o=Object(i.a)(r,2),a=(o[0],o[1],Object(c.useState)(!0)),l=Object(i.a)(a,2),u=l[0],d=l[1],j=Object(c.useState)({poids_de_la_piece:0,minimum:500,quantite_totale:0,type_de_vente:"a_la_piece",id:"",name:"",img_url:"",part_value:"",prix_au_kilo:"",quantity:""}),b=Object(i.a)(j,2),p=b[0],O=b[1],f=Object(c.useState)(["non"]),m=Object(i.a)(f,2),g=m[0],x=m[1],v=Object(c.useState)({value:"non"}),w=Object(i.a)(v,2),S=w[0],k=w[1],C=Object(c.useCallback)((function(){return _(x)}));function E(e){if("number"===e.target.type){var t=parseInt(e.target.value);O(Object(s.a)(Object(s.a)({},p),{},Object(h.a)({},e.target.name,t)))}else O(Object(s.a)(Object(s.a)({},p),{},Object(h.a)({},e.target.name,e.target.value)))}Object(c.useEffect)(C,[]);var D=function(){n(!1)};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"product-container ".concat(u?"product-container-expanded":void 0),style:{maxWidth:300},children:[Object(y.jsxs)("div",{className:"name-container",style:{width:"100%",background:"navy",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(y.jsx)("h3",{style:{color:"white",margin:"16px 32px"},children:p.name}),Object(y.jsx)("div",{className:"close-x",onClick:D,children:"X"})]}),Object(y.jsxs)("div",{className:"input-button-container",children:[Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Choisir"}),Object(y.jsx)("select",{id:"list",name:"poissons",onChange:function(e){"default"!==e.target.value&&(console.log(e.target.value),I(O,e.target.value),k({value:e.target.value}))},value:S.value,children:g.length>0&&g.map((function(e){var t=e.toString();return Object(y.jsx)("option",{value:t,children:t},t)}))}),Object(y.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:void 0!=p.img_url&&Object(y.jsx)("img",{style:{width:"80%",marginTop:24},src:p.img_url})}),Object(y.jsxs)("form",{onSubmit:function(e){console.log(p),e.preventDefault(),Object(R.a)(d,O,p),n(!1)},style:{display:"flex",flexDirection:"column"},children:[Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Nom"}),Object(y.jsx)("input",{type:"text",name:"name",label:"Nom",style:{fontSize:18,textAlign:"right"},className:"product-input",value:p.name,onChange:E}),Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Type de Vente"}),Object(y.jsxs)("select",(t={id:"list2",selected:!0,value:p.type_de_vente,name:"vente",onChange:function(e){console.log(e.target.value),O(Object(s.a)(Object(s.a)({},p),{},{type_de_vente:e.target.value}))}},Object(h.a)(t,"value",S.value),Object(h.a)(t,"children",[Object(y.jsx)("option",{value:"",children:"Choisir"}),Object(y.jsx)("option",{value:"a_la_piece",children:"A la Pi\xe8ce"}),Object(y.jsx)("option",{value:"au_poids",children:"Au poids"})]),t)),Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Prix/Kilo"}),Object(y.jsx)("input",{type:"number",min:"0",step:"1",name:"prix_au_kilo",label:"Prix au Kilo",style:{fontSize:18,textAlign:"right"},className:"product-input",value:p.prix_au_kilo,onChange:E}),"au_poids"===p.type_de_vente&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Minimum en G"}),Object(y.jsx)("input",{type:"number",min:"0",step:"1",name:"part_value",label:"Une Part =",style:{fontSize:18,textAlign:"right"},className:"product-input",value:p.minimum,onChange:E}),Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Quantit\xe9 Totale en G"}),Object(y.jsx)("input",{type:"number",min:"0",step:"1",name:"quantity",label:"Quantit\xe9 disponible",style:{fontSize:18,textAlign:"right"},className:"product-input",value:p.quantity,onChange:E})]}),"a_la_piece"===p.type_de_vente&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Poids de la Pi\xe8ce"}),Object(y.jsx)("input",{type:"number",min:"0",step:"1",name:"poids_de_la_piece",label:"Poids de la piece",style:{fontSize:18,textAlign:"right"},className:"product-input",value:p.poids_de_la_piece,onChange:E})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(y.jsx)("button",{style:{color:"black",padding:16,marginBottom:16,marginRight:16},type:"submit",children:"POSTER"}),Object(y.jsx)("button",{className:"input-button",style:{color:"black",padding:16,marginBottom:16,marginLeft:16},onClick:D,children:"Annuler"})]})})]})]})]})})},q=function(e){var t=e.products;console.log(t);var n=Object(c.useState)(!1),r=Object(i.a)(n,2),o=r[0],a=r[1];return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[t&&null!==t[0]&&t.map((function(e,t){return Object(y.jsx)(F,{product:e},e+t+"key")})),!t&&Object(y.jsx)("p",{children:"loading..."}),!1===o&&Object(y.jsx)("button",{style:{cursor:"pointer",marginTop:36,minWidth:120,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:function(){a(!0)},children:"Ajouter"}),!0===o&&Object(y.jsx)(M,{setShowAddPanel:a})]})},"product-list")},B=function(e){var t=e.product,n=Object(c.useState)(null),r=Object(i.a)(n,2),o=r[0],a=r[1];var s=Object(c.useCallback)((function(){t.name&&(t.name.length>12?a(300/t.name.length):a(22))}),[t.name]);return Object(c.useEffect)(s,[t.name]),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{onClick:function(){console.log(t)},children:[Object(y.jsx)("h2",{style:{fontSize:o},className:"name",children:t.name}),Object(y.jsxs)("h2",{style:{fontSize:o},className:"name",children:[t.quantity/1e3,"Kg"]}),Object(y.jsxs)("h2",{style:{fontSize:o},className:"name",children:["co\xfbt:",t.price,"\u20ac"]})]})})},G=function(e){var t=e.order,n=Object(c.useState)(!1),r=Object(i.a)(n,2),o=r[0],a=r[1],s=Object(c.useState)(),l=Object(i.a)(s,2),u=l[0],d=l[1];return Object(c.useEffect)((function(){t.id&&O.c.collection("orders").doc(t.id).collection("products").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data()),console.log(e.id," => ",e.data())})),d(t)}),[]).catch((function(e){console.log("Error getting documents: ",e)}))}),[]),Object(y.jsxs)("div",{style:{padding:"2rem",minWidth:"40%",border:"2px black solid"},children:[Object(y.jsxs)("div",{onClick:function(){a(!o)},style:{cursor:"pointer"},children:[Object(y.jsxs)("h2",{children:["Nom:",t.username]}),Object(y.jsxs)("h2",{children:["Adresse:",t.address]}),Object(y.jsxs)("h2",{children:["Phone: ",t.phone]}),Object(y.jsxs)("h2",{children:["Total: ",t.price,"\u20ac"]}),Object(y.jsxs)("h2",{children:["Command\xe9 le: ",t.date]}),Object(y.jsxs)("h2",{children:["A Livrer:",t.time]})]}),o&&u&&Object(y.jsxs)("div",{children:[u&&void 0!==u[0]&&u.map((function(e,t){return Object(y.jsx)(B,{product:e},e+t+"key")})),!u&&Object(y.jsx)("p",{children:"loading..."})]}),Object(y.jsx)("button",{style:{cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.c.collection("orders").doc(t.id).set({status:"delivre"},{merge:!0}).then((function(){a(!1)}));case 2:case"end":return e.stop()}}),e)}))),children:"Not\xe9 comme Livr\xe9"})]})},J=function(e){var t=e.orders,n=Object(c.useState)(!1),r=Object(i.a)(n,2);r[0],r[1];return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[t&&null!==t[0]&&t.map((function(e,t){return Object(y.jsx)(G,{order:e},e+t+"key")})),!t&&Object(y.jsx)("p",{children:"loading..."})]})},"product-list")},V=function(){var e=Object(c.useContext)(D),t=e.userInfos,n=e.setUserInfos,r=Object(c.useState)([]),o=Object(i.a)(r,2),a=o[0],s=o[1],l=Object(c.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1];return console.log(a),console.log(d),Object(c.useEffect)((function(){E(n)}),[]),Object(c.useEffect)((function(){var e=O.c.collection("products").onSnapshot((function(e){if(e.size){var t=Object(C.a)(a);e.forEach((function(e){t.push(e.data()),console.log(a)})),s(t)}else console.log("EMPTY"),console.log(a)}));return function(){e()}}),[U.a]),Object(c.useEffect)((function(){var e=O.c.collection("orders").where("status","==","confirmed").onSnapshot((function(e){var t=Object(C.a)(d);e.size?(e.forEach((function(e){t.push(e.data())})),j(t),console.log(d)):console.log("EMPTY")}));return function(){e()}}),[U.a]),Object(y.jsx)("div",{style:{background:"bisque",border:"2px solid black"},children:!0===t.admin&&Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{className:"etal-intro",children:"G\xe9rer Les Produits du Jour"}),t&&Object(y.jsx)(q,{userInfos:t,products:a}),Object(y.jsx)("h2",{className:"etal-intro",children:"Vos Commandes en cours"}),t&&d.length>0&&Object(y.jsx)(J,{userInfos:t,orders:d})]})})},H=function(){var e=Object(c.useContext)(D),t=e.userInfos,n=e.setUserInfos,r=Object(c.useState)([]),o=Object(i.a)(r,2),a=o[0],s=o[1],l=Object(c.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)("initial"),p=Object(i.a)(b,2),h=p[0],f=p[1],m=Object(c.useState)(0),g=Object(i.a)(m,2),x=g[0],w=g[1],S=Object(c.useState)(0),k=Object(i.a)(S,2),_=k[0],I=k[1];return Object(c.useEffect)((function(){E(n)}),[]),console.log(t),Object(c.useEffect)((function(){var e=O.c.collection("products").onSnapshot((function(e){if(e.size){var t=Object(C.a)(a);e.forEach((function(e){t.push(e.data()),console.log("PRODUCTS SNAPSHOT IN ETAL"),console.log(a)})),!0&&s(t)}else console.log("EMPTY SNAPSHOT IN ETAL"),console.log(a)}));return function(){e()}}),[U.a]),Object(c.useEffect)((function(){var e=function(){};return""!==h&&(e=O.c.collection("orders").doc(h).collection("products").onSnapshot((function(e){e.forEach((function(e){if(e.exists){console.log("Document data:",e.data());var t=e.data();console.log(t)}else console.log("No such document!")}))}))),function(){e(),!1}}),[U.a]),Object(c.useEffect)((function(){if(console.log("ORDERCYCLE STARTS"),"initial"===h&&""!==t.username){var e=t.username.toString()+Math.floor(1e4*Math.random());f(e.toString())}else console.log("WAITING FOR USERINFOS IN PANIERLIST");return function(){!1}}),[t]),Object(y.jsxs)("div",{className:"etal-container",children:[Object(y.jsxs)("div",{className:"etal-header",children:[Object(y.jsx)("img",{src:v.a,style:{height:"2rem",marginRight:"1rem"}}),Object(y.jsx)("h2",{children:t.username})]}),!0===t.admin&&Object(y.jsx)(V,{}),Object(y.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(y.jsx)(L,{userInfos:t})}),Object(y.jsx)("h2",{className:"etal-intro",children:"Produits du Jour"}),t&&a.length>0&&Object(y.jsx)(A,{setNewOrderAlert:I,setTotalPrice:w,userInfos:t,products:a,order:d,setOrder:j,orderUID:h,setOrderUID:f})||Object(y.jsx)("p",{style:{margin:36},children:"Pas de Produits pour l'instant"}),Object(y.jsx)("h2",{className:"etal-intro",children:"Votre Panier"}),null!==h&&console.log("ORDERUID IN ETAL: "+h.toString()),""!==t.username&&d!==[]&&Object(y.jsx)(T,{newOrderAlert:_,setOrderUID:f,userInfos:t,setTotalPrice:w,totalPrice:x,orderUID:h,order:d,setOrder:j})]})},K=(n(73),function(){var e=Object(c.useState)({error:null,phone:"",email:"",address:"",password:"",username:""}),t=Object(i.a)(e,2),n=t[0],r=t[1];function o(e){r(Object(s.a)(Object(s.a)({},n),{},Object(h.a)({},e.target.name,e.target.value)))}function a(){return(a=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(Object(s.a)(Object(s.a)({},n),{},{error:""})),e.prev=2,e.next=5,f(n.email,n.password);case 5:m(n.phone,n.email,n.address,n.password,n.username,O.a.currentUser.uid),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r(Object(s.a)(Object(s.a)({},n),{},{error:e.t0.message}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return Object(y.jsx)("div",{className:"form-container",children:Object(y.jsxs)("form",{onSubmit:function(e){return a.apply(this,arguments)},children:[Object(y.jsx)("h1",{children:"Sign Up to Chatty Cats"}),Object(y.jsx)("p",{children:"Fill in the form below to create an account."}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{placeholder:"Email",name:"email",type:"email",onChange:o,value:n.email})}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{placeholder:"Nom Pr\xe9nom",name:"username",type:"name",onChange:o,value:n.username})}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{placeholder:"Password",name:"password",onChange:o,value:n.password,type:"password"})}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{placeholder:"T\xe9l\xe9phone",name:"phone",onChange:o,value:n.phone,type:"tel"})}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{placeholder:"1 rue du Gourmet, Saint-Fran\xe7ois",name:"address",onChange:o,value:n.adress,type:"text"})}),n.error?Object(y.jsx)("p",{children:n.error}):null,Object(y.jsx)(x.a.button,{style:{background:"navy",color:"white",border:0,borderRadius:12,paddingTop:8,margin:"0 auto",fontSize:24,cursor:"pointer"},whileHover:{scale:1.2},type:"submit",children:Object(y.jsx)("img",{alt:"sign-up",style:{height:"3rem"},src:v.a})}),Object(y.jsx)("hr",{}),Object(y.jsxs)("p",{children:["Already have an account? ",Object(y.jsx)(d.b,{to:"/login",children:"Login"})]})]})})});function Y(e){var t=e.component,n=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(y.jsx)(u.b,Object(s.a)(Object(s.a)({},c),{},{render:function(e){return n?Object(y.jsx)(t,Object(s.a)({},e)):Object(y.jsx)(u.a,{to:"/login"})}}))}function Q(e){var t=e.component,n=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(y.jsx)(u.b,Object(s.a)(Object(s.a)({},c),{},{render:function(e){return n?Object(y.jsx)(u.a,{to:"etal"}):Object(y.jsx)(t,Object(s.a)({},e))}}))}var X=function(){var e=Object(c.useState)({loggedin:!1,loading:!0}),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)({email:"",imageUrl:"",username:""}),a=Object(i.a)(o,2),s=a[0],l=a[1],j=Object(c.useMemo)((function(){return{userInfos:s,setUserInfos:l}}),[s,l]);return Object(c.useEffect)((function(){O.a.onAuthStateChanged((function(e){r(e?{loggedin:!0,loading:!1}:{loggedin:!1,loading:!1})}))}),[]),Object(y.jsx)(d.a,{children:Object(y.jsx)(u.d,{children:Object(y.jsxs)(D.Provider,{value:j,children:[Object(y.jsx)(u.b,{exact:!0,path:"/",component:k}),Object(y.jsx)(Y,{path:"/etal",authenticated:n.loggedin,component:H}),Object(y.jsx)(Q,{path:"/signup",authenticated:n.loggedin,component:K}),Object(y.jsx)(Q,{path:"/login",authenticated:n.loggedin,component:w})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(X,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[74,1,2]]]);
//# sourceMappingURL=main.0a937a4c.chunk.js.map