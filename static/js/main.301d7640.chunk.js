(this["webpackJsonpdirect-pecheur"]=this["webpackJsonpdirect-pecheur"]||[]).push([[0],{32:function(e,t,n){},49:function(e,t,n){},57:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),o=n(50),i=n.n(o),a=(n(57),n(6)),s=n(7),l=n(44),d=n(13),u=n(26),j=n(10),b=n.n(j),h=n(15),p=n(25),O=n(18),m=(n(61),n(62),{apiKey:"AIzaSyAlBaCFinB-aIngyUsjgwjRxGvyrJmnA-c",authDomain:"direct-pecheur.firebaseapp.com",databaseURL:"https://direct-pecheur-default-rtdb.firebaseio.com",projectId:"direct-pecheur",storageBucket:"direct-pecheur.appspot.com",messagingSenderId:"818286468462",appId:"1:818286468462:web:6724b007647e3f9d92b57f",measurementId:"G-GJJZR103LJ"}),g=O.a.initializeApp(m).firestore(),f=O.a.auth(),x=(O.a.firestore(),O.a.storage());x.ref();function v(e,t){return f.createUserWithEmailAndPassword(e,t)}function y(e,t,n,c,r,o){return g.collection("users").doc(f.currentUser.uid).set({phone:e,email:t,address:n,password:c,username:r,id:o}).then((function(){console.log("Document successfully written!"+f.currentUser)})).catch((function(e){console.error("Error writing document: ",e)}))}function w(e,t){return f.signInWithEmailAndPassword(e,t)}var S=n(73),_=n.p+"static/media/bluehook.8491f50b.svg",k=n(2),C=function(){var e=Object(c.useState)({error:"",email:"",password:""}),t=Object(a.a)(e,2),n=t[0],r=t[1];function o(e){e.preventDefault(),console.log(n),r(Object(s.a)(Object(s.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))}function i(){return(i=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(Object(s.a)(Object(s.a)({},n),{},{error:""})),e.prev=2,e.next=5,w(n.email.toLowerCase(),n.password);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r({error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(k.jsx)("h1",{children:"Login to Chatty Cats"}),Object(k.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(k.jsx)("div",{children:Object(k.jsx)("input",{style:{fontSize:24,height:32,width:"auto",padding:12,margin:"1rem"},placeholder:"Email",name:"email",type:"email",onChange:o,value:n.email})}),Object(k.jsx)("div",{children:Object(k.jsx)("input",{style:{fontSize:24,height:32,width:"auto",padding:12,margin:"1rem"},placeholder:"Password",name:"password",onChange:o,value:n.password,type:"password"})}),Object(k.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[n.error?Object(k.jsx)("p",{children:n.error}):null,Object(k.jsx)(S.a.button,{style:{background:"rebeccapurple",color:"white",border:0,borderRadius:12,paddingTop:7,margin:24,fontSize:24,cursor:"pointer"},whileHover:{scale:1.2},type:"submit",children:Object(k.jsx)("img",{alt:"login",style:{height:"3rem"},src:_})})]}),Object(k.jsx)("hr",{}),Object(k.jsxs)("p",{children:["Don't have an account? ",Object(k.jsx)(u.b,{to:"/signup",children:"Sign up"})]})]})]})},I=(n(68),n.p+"static/media/hook.923c7084.svg"),D=function(){return Object(k.jsx)("div",{classsName:"home-container",style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:Object(k.jsxs)(S.a.div,{style:{textAlign:"center"},initial:{y:500,color:"#000"},animate:{y:-20,color:["#552B72","#8A2E60","#CECE66","#FFFFFF"]},transition:{duration:1.5,delay:.1},children:[" ",Object(k.jsx)("div",{style:{marginTop:"2rem"},children:Object(k.jsx)("img",{width:"250px",src:I})}),Object(k.jsx)("h1",{style:{color:"rgba(59, 89, 147, 1)"},children:"Bienvenue chez Direct-P\xeacheur!"}),Object(k.jsx)(u.b,{className:"button-style-link",to:"/signup",style:{textDecoration:"none",margin:12,padding:12,borderRadius:12,background:"rgba(59, 89, 147, 1)",color:"white",fontSize:"2rem"},children:"S'inscrire"}),Object(k.jsx)(u.b,{className:"button-style-link",to:"/login",style:{textDecoration:"none",margin:12,padding:12,borderRadius:12,background:"white",border:"2px solid rgba(59, 89, 147, 1)",color:"rgba(59, 89, 147, 1)",fontSize:"2rem"},children:"Entrer"})]})})},N=n(36),E=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["non"],c=g.collection("products_types"),e.next=4,c.get().then((function(e){return e.forEach((function(e){e.exists?n.push(e.data().nom):console.log("No such document!")})),n}));case 4:r=e.sent,console.log(r),t(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(b.a.mark((function e(t,n){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=g.collection("products_types").doc(n),e.next=3,c.get().then((function(e){var n=e.data();e.exists?(console.log("Document data:",e.data()),console.log("Document data:",e.data()),r={minimum:n.minimum,name:n.nom,img_url:"https://firebasestorage.googleapis.com/v0/b/".concat(m.storageBucket,"/o/").concat(n.default_image_url,"?alt=media"),type_de_vente:n.vente,prix_au_kilo:n.prix_au_kilo},t(r)):console.log("No such document!")}));case 3:e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){g.collection("users").doc(f.currentUser.uid).get().then((function(t){if(t.exists){console.log("Document data:",t.data());var n=t.data();e(Object(s.a)({},n))}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))},U=Object(c.createContext)(),R=n(74),T=(n(32),function(){var e=Object(h.a)(b.a.mark((function e(t,n,c){var r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(n,10),"minus"===c&&(r=-Math.abs(r)),console.log("VALUE****************"+r),e.next=5,g.collection("products").doc(t).get().then((function(e){if(e.exists)return console.log("Document data:",e.data()),e.data().quantity;console.log("No such document!")})).catch((function(e){return console.log("Error getting document:",e),"ERROR"}));case 5:o=e.sent,i=o+r,console.log("newValue= "+i),console.log("VALUE****************"+i),g.collection("products").doc(t).update({quantity:i}).then((function(){console.log("Quantity Value for my product successfully updated!")})).catch((function(e){console.error("Error writing document: ",e)}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()),z=function(){var e=Object(h.a)(b.a.mark((function e(t,n,c,r,o,i){var a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Math.round(Date.now()/1e3),console.log(i),s={orderUID:t,name:n.name,quantity:i,price:o,type_de_vente:n.type_de_vente,productUID:n.id,postedAt:a,sentBy:c,userUID:r},g.collection("orders").doc(t).collection("products").add(s).then(function(){var e=Object(h.a)(b.a.mark((function e(n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.id,e.next=3,g.collection("orders").doc(t).collection("products").doc(c).update({id:c,isAvailable:!0});case 3:console.log("product added to "+t+" "+c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error writing document: ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,c,r,o,i){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("REMOVE FROM ORDER"),!n){e.next=7;break}return console.log("REMOVE PRODUCT FROM ORDER"),e.next=5,g.collection("orders").doc(n).collection("products").doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}));case 5:e.next=9;break;case 7:console.log("error removing product from order"),console.log(n,t);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(e){var t=e.setNewOrderAlert,n=e.setTotalPrice,r=e.product,o=(e.productTotalQuantity,e.setOrderUID,e.orderUID),i=(e.order,e.setOrder,e.userInfos),s=e.detailsAreShown,l=e.setDetailsAreShown,d=(e.containerIsShown,e.setContainerIsShown),u=Object(c.useState)(""),j=Object(a.a)(u,2),b=j[0];j[1];Object(c.useEffect)((function(){r.poids_de_la_piece>0&&m(r.poids_de_la_piece)}),[r]),console.log(o),console.log(i.username);var h=Object(c.useState)(500),p=Object(a.a)(h,2),O=p[0],m=p[1],g=function(e){console.log(O),e.preventDefault();var c=r.prix_au_kilo/1e3*O;z(o,r,i.username,i.id,c,O),T(r.id,O,"minus"),l(!1),d(!1),t((function(e){return e+1})),n((function(e){return e+c}))},f=function(){l(!1),d(!1),m(0)};return Object(k.jsxs)("div",{className:"product-container ".concat(s?"product-container-expanded":void 0),children:[Object(k.jsxs)("div",{className:"name-container",style:{width:"100%",background:"navy",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(k.jsx)("h3",{style:{color:"white",margin:"16px 32px"},children:r.name}),Object(k.jsx)("div",{className:"close-x",onClick:f,children:"X"})]}),Object(k.jsxs)("div",{style:{color:"white"},children:[Object(k.jsx)("div",{className:"img-container",children:Object(k.jsx)("img",{alt:"avatar-".concat(r.name),style:{cursor:"pointer"},src:r.img_url,className:"avatar"})}),Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{children:["Prix au kilo: ",r.prix_au_kilo,"\u20ac","    "]}),"au_poids"===r.type_de_vente&&Object(k.jsxs)("li",{style:{paddingBottom:"16px"},children:["Qantit\xe9 minimum : ",r.minimum,"g"]})]})]}),Object(k.jsxs)("div",{className:"input-button-container",children:["au_poids"===r.type_de_vente&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Quantit\xe9 d\xe9sir\xe9e en grammes"}),Object(k.jsx)("span",{style:{color:"red",padding:b&&8,background:"white"},children:b}),Object(k.jsxs)("form",{onSubmit:g,children:[Object(k.jsx)("input",{type:"number",min:r.minimum,max:r.total_quantity,step:"200",label:"Quantit\xe9 d\xe9sir\xe9e en grammes",style:{fontSize:18,textAlign:"right"},className:"product-input",value:O,onChange:function(e){m(e.target.value)}}),Object(k.jsx)("button",{className:"input-button",type:"submit",children:Object(k.jsx)("img",{style:{height:"2.5rem",width:"2.5rem"},src:_})}),Object(k.jsx)("button",{className:"input-button",style:{color:"white"},onClick:f,children:"Annuler"})]})]}),"a_la_piece"===r.type_de_vente&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("p",{style:{width:"100%",color:"white",fontSize:16,textAlign:"center"},children:["Poids de la Pi\xe8ce: ",r.poids_de_la_piece]}),Object(k.jsxs)("div",{className:"input-button",style:{cursor:"pointer",background:"transparent",border:0,borderColor:"transparent",width:"100%",textAlign:"center"},onClick:g,children:[Object(k.jsx)("img",{style:{height:"2.5rem",width:"2.5rem"},src:_}),Object(k.jsx)("p",{style:{width:"100%",color:"white",fontSize:16,textAlign:"center"},children:"Confirmer"})]})]})]})]})},F=function(e){var t=e.setNewOrderAlert,n=(e.username,e.userUID,e.detailsAreShown),r=e.setDetailsAreShown,o=e.setTotalPrice,i=e.userInfos,s=e.order,l=e.setOrder,d=e.orderUID,u=e.setOrderUID,j=e.product,b=Object(c.useState)(null),h=Object(a.a)(b,2),p=h[0],O=h[1],m=Object(c.useState)(!1),g=Object(a.a)(m,2),f=g[0],x=g[1];var v=Object(c.useCallback)((function(){j.name&&(j.name.length>12?O(300/j.name.length):O(22))}),[j.name]);return Object(c.useEffect)(v,[j.name]),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{onClick:function(){r(!n),x(!f)},className:"order-container",style:{pointerEvents:j.quantity<1?"none":"auto",backgroundColor:j.quantity>0?"white":"lightgrey",border:"a_la_piece"===j.type_de_vente?"2px solid darkseagreen":"2px solid skyblue"},children:[Object(k.jsxs)("div",{className:"img-container",children:[Object(k.jsx)("div",{style:{display:"block",position:"absolute",top:0},children:"a_la_piece"===j.type_de_vente?Object(k.jsx)("h3",{style:{background:"honeydew"},children:"A la Pi\xe8ce"}):Object(k.jsx)("h3",{style:{background:"skyblue"},children:"Au Poids"})}),Object(k.jsx)("img",{alt:"avatar-".concat(j.name),style:{cursor:"pointer",filter:j.quantity>0?"none":"grayscale(100%)"},src:j.img_url,className:n?"avatar avatar-reduced":"avatar"})]}),Object(k.jsx)("h2",{style:{fontSize:p},className:"name",children:j.name}),Object(k.jsxs)("h2",{style:{fontSize:p},className:"name",children:[j.prix_au_kilo,"\u20ac/Kg"]}),"a_la_piece"===j.type_de_vente?Object(k.jsxs)("h2",{style:{fontSize:p},className:"name",children:[j.name," de ",j.poids_de_la_piece/1e3,"Kg"]}):Object(k.jsxs)("h2",{style:{fontSize:p},className:"name",children:[j.quantity/1e3,"Kg disponibles!"]})]}),f&&Object(k.jsx)(R.a,{children:Object(k.jsx)(S.a.div,{initial:{height:0,width:0,position:"absolute",top:0,left:0,transform:"translate(0,0)",opacity:1},animate:{height:"auto",width:"auto",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",opacity:1},exit:{height:0,width:0,position:"absolute",top:0,right:0,transform:"translate(0,0)",opacity:1},style:{zIndex:999},children:Object(k.jsx)(W,{setNewOrderAlert:t,product:j,productTotalQuantity:j.quantity,order:s,setOrder:l,orderUID:d,setOrderUID:u,userInfos:i,detailsAreShown:n,setDetailsAreShown:r,setContainerIsShown:x,containerIsShown:f,setTotalPrice:o})},j.id)})]})},L=function(e){var t=e.setNewOrderAlert,n=e.setTotalPrice,r=e.userInfos,o=e.products,i=e.order,s=e.setOrder,l=e.orderUID,d=e.setOrderUID;console.log(o);var u=Object(c.useState)(!1),j=Object(a.a)(u,2),b=j[0],h=j[1];return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[o&&null!==o[0]&&o.map((function(e,c){return Object(k.jsx)(F,{setNewOrderAlert:t,username:r.username,userUID:r.userUID,detailsAreShown:b,setDetailsAreShown:h,setTotalPrice:n,userInfos:r,product:e,order:i,setOrder:s,orderUID:l,setOrderUID:d,contactUID:e},e+c+"key")})),!o&&Object(k.jsx)("p",{children:"loading..."})]})},"product-list")},M=(n.p,function(e){var t=e.index,n=e.product,r=e.orderUID,o=e.setTotalPrice,i=e.setOrder;console.log(n),console.log(r);var s=Object(c.useContext)(U),l=(s.userInfos,s.setUserInfos,Object(c.useState)(null)),d=Object(a.a)(l,2),u=(d[0],d[1]),j=Object(c.useState)(!1),b=Object(a.a)(j,2),h=(b[0],b[1],Object(c.useState)(null)),p=Object(a.a)(h,2);p[0],p[1];return console.log(n),Object(c.useEffect)((function(){console.log("PROD IN ORDER"),console.log(n),n.name&&(n.name.length>12?(u(300/n.name.length),o((function(e){return e+n.price}))):u(22))}),[n]),Object(k.jsx)("div",{children:Object(k.jsxs)("div",{children:["a_la_piece"===n.type_de_vente?Object(k.jsxs)("h3",{children:["1 ",n.name," de ",n.quantity,"g --- ",n.price," \u20ac"]}):Object(k.jsxs)("h3",{children:[n.quantity,"g de ",n.name," ",Object(k.jsxs)("b",{children:[n.price,"\u20ac"]})]}),Object(k.jsx)("span",{style:{border:"2px solid orange",marginTop:14,padding:4,cursor:"pointer",pointerEvents:"auto",fontWeight:"bold"},onClick:function(){q(n.id,r),console.log(n.productUID),T(n.productUID,n.quantity,"plus"),o((function(e){return e-n.price})),i((function(e){return e.splice(t,1)})),console.log("click")},children:"X retirer"})]})})}),B=function(e){var t=e.newOrderAlert,n=e.userInfos,r=(e.setOrderUID,e.orderUID),o=e.order,i=e.setOrder,l=e.totalPrice,d=e.setTotalPrice,u=Object(c.useState)(!1),j=Object(a.a)(u,2),b=j[0],h=j[1],p=Object(c.useState)(" Ce soir entre 18H00 et 20H00"),O=Object(a.a)(p,2),m=O[0],f=O[1],x=Object(c.useState)(""),v=Object(a.a)(x,2),y=v[0],w=v[1],S=Object(c.useState)(!1),_=Object(a.a)(S,2),C=_[0],I=_[1],D=Object(c.useState)(!1),N=Object(a.a)(D,2),E=N[0],A=N[1];return console.log(o),Object(c.useEffect)((function(){console.log("GETTING A NEW ORDER");var e=!0,t=[];"initial"!==r&&g.collection("orders").doc(r).collection("products").get().then((function(n){n.forEach((function(e){o.includes(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))||t.push(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))})),e&&(i([].concat(t)),console.log("ORDER ORDER!"))}));return function(){e=!1}}),[t]),Object(k.jsxs)("div",{children:[b&&Object(k.jsxs)("div",{style:{fontSize:24,postion:"absolute",width:"90vw",height:"90vh",textAlign:"center"},children:["Merci! ",Object(k.jsx)("br",{}),"Nous avons bien re\xe7u votre commande!"]}),Object(k.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[o.length<1&&Object(k.jsx)("h2",{children:"Fa\xeetes votre choix..."}),console.log(o),n&&r&&o[0]&&t&&o.map((function(e,t){return Object(k.jsx)(M,{index:t,setTotalPrice:d,product:e,setOrder:i,orderUID:r},e+t+"key")}))]}),Object(k.jsxs)("div",{style:{margin:"32px auto",width:"90vw"},children:[Object(k.jsxs)("h2",{children:["Total du Jour: ",l,"\u20ac"]})," "]}),l>0?Object(k.jsxs)("div",{style:{width:"90vw",margin:"0 auto",textAlign:"center"},children:[Object(k.jsxs)("div",{style:{margin:16},children:["Livrer \xe0 ",Object(k.jsx)("h3",{children:y||n.address}),Object(k.jsx)("span",{style:{border:"1px black solid",background:"skyblue",padding:4,cursor:"pointer"},onClick:function(){I(!0)},children:"Changer"})]}),C&&Object(k.jsxs)("div",{children:[Object(k.jsx)("input",{type:"text",name:"address",onChange:function(e){w(e.target.value)},value:y}),Object(k.jsx)("button",{onClick:function(){I(!1),console.log(y)},children:"Confirmer"})]}),Object(k.jsxs)("div",{style:{margin:16},children:["Heure de livraison ",Object(k.jsx)("h3",{children:m})," ",Object(k.jsx)("span",{style:{border:"1px black solid",background:"skyblue",padding:4,cursor:"pointer"},onClick:function(){A(!0)},children:"Changer"})]}),E&&Object(k.jsxs)("div",{children:[Object(k.jsx)("input",{type:"text",name:"address",onChange:function(e){f(e.target.value)},value:m}),Object(k.jsx)("button",{onClick:function(){A(!1),console.log(m)},children:"Confirmer"})]}),Object(k.jsx)("button",{style:{cursor:"pointer",padding:"1rem",color:"white",fontSize:16,fontWeight:"bold",borderRadius:8,border:0,background:"rgba(59, 89, 147, 1)"},onClick:function(){var e=""!==y?y:n.address;!function(e,t,n,c,r,o,i){var a={id:t,date:(new Date).toDateString(),status:"confirmed",username:n,address:c,phone:r,time:o,price:i};g.collection("orders").doc(t).set(Object(s.a)({},a),{merge:!0}).then((function(){e(!0)}))}(h,r,n.username,e,n.phone,m,l)},children:"Passer ma Commande"})]}):null]})},G=n.p+"static/media/exit.2b0e4681.svg";var J=function(){return Object(k.jsxs)("div",{style:{width:150,height:"1rem",margin:"1rem",textAlign:"center",cursor:"pointer"},onClick:function(){f.signOut().then((function(){c.useHistory.push("/login")})).catch((function(e){console.log(e)}))},children:[Object(k.jsx)("img",{style:{height:"1rem",margin:".5rem",transform:"translateY(50%)"},alt:"logout",src:G}),"Log Out"]})};n(69);n.p,n.p;var K=function(e){return e.userInfos,Object(k.jsx)("div",{className:"actionsNav",style:{display:"flex",justifyContent:"left",alignItems:"baseline",flexDirection:"column",padding:"0 1rem"},children:Object(k.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"baseline",flexDirection:"row",width:"100%"},children:Object(k.jsx)(J,{})})})},Q=(n(49),function(e){var t=e.product,n=Object(c.useState)(!0),r=Object(a.a)(n,2),o=r[0],i=r[1],s=Object(c.useState)(null),l=Object(a.a)(s,2),d=l[0],u=l[1];function j(){return(j=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=Object(c.useCallback)((function(){t.name&&(t.name.length>12?u(300/t.name.length):u(22))}),[t.name]);return Object(c.useEffect)(p,[t.name,t.img_url]),Object(k.jsx)("div",{style:{minWidth:200,border:"1px solid black",padding:16,borderRadius:8},children:o&&Object(k.jsxs)("div",{onClick:function(){return j.apply(this,arguments)},children:[t.img&&Object(k.jsx)("img",{src:t.img_url,height:64}),Object(k.jsx)("h2",{style:{fontSize:d},className:"name",children:t.name}),Object(k.jsxs)("h2",{style:{fontSize:d},className:"name",children:["Quantit\xe9:",t.quantity/1e3,"Kg"]}),Object(k.jsxs)("h2",{style:{fontSize:d},className:"name",children:[t.prix_au_kilo,"\u20ac/Kg"]}),Object(k.jsx)("div",{style:{width:"100%",textAlign:"center"},children:Object(k.jsx)("button",{style:{margin:"0 auto",cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("products").doc(t.id).delete().then((function(){i(!1),console.log("Document successfully deleted!")}));case 2:case"end":return e.stop()}}),e)}))),children:"Retirer"})})]})})}),V=function(e){var t,n=e.setShowAddPanel,r=Object(c.useState)(""),o=Object(a.a)(r,2),i=(o[0],o[1],Object(c.useState)(!0)),l=Object(a.a)(i,2),d=l[0],u=l[1],j=Object(c.useState)({poids_de_la_piece:0,minimum:500,quantite_totale:0,type_de_vente:"a_la_piece",id:"",name:"",img_url:"",part_value:"",prix_au_kilo:"",quantity:""}),b=Object(a.a)(j,2),h=b[0],O=b[1],m=Object(c.useState)(["non"]),f=Object(a.a)(m,2),x=f[0],v=f[1],y=Object(c.useState)({value:"non"}),w=Object(a.a)(y,2),S=w[0],_=w[1],C=Object(c.useCallback)((function(){return E(v)}));function I(e){if("number"===e.target.type){var t=parseInt(e.target.value);O(Object(s.a)(Object(s.a)({},h),{},Object(p.a)({},e.target.name,t)))}else O(Object(s.a)(Object(s.a)({},h),{},Object(p.a)({},e.target.name,e.target.value)))}Object(c.useEffect)(C,[]);var D=function(){n(!1)};return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"product-container ".concat(d?"product-container-expanded":void 0),style:{maxWidth:300},children:[Object(k.jsxs)("div",{className:"name-container",style:{width:"100%",background:"navy",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(k.jsx)("h3",{style:{color:"white",margin:"16px 32px"},children:h.name}),Object(k.jsx)("div",{className:"close-x",onClick:D,children:"X"})]}),Object(k.jsxs)("div",{className:"input-button-container",children:[Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Choisir"}),Object(k.jsx)("select",{id:"list",name:"poissons",onChange:function(e){"default"!==e.target.value&&(console.log(e.target.value),A(O,e.target.value),_({value:e.target.value}))},value:S.value,children:x.length>0&&x.map((function(e){var t=e.toString();return Object(k.jsx)("option",{value:t,children:t},t)}))}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:void 0!=h.img_url&&Object(k.jsx)("img",{style:{width:"80%",marginTop:24},src:h.img_url})}),Object(k.jsxs)("form",{onSubmit:function(e){console.log(h),e.preventDefault(),function(e,t,n){var c,r;r="a_la_piece"===n.type_de_vente?Object(s.a)(Object(s.a)({},n),{},{quantity:n.poids_de_la_piece,minimum:n.poids_de_la_piece}):n,g.collection("products").add(r).then((function(e){c=e.id,g.collection("products").doc(e.id).set({id:e.id,isAvailable:!0},{merge:!0})})).then((function(){t(Object(s.a)(Object(s.a)({},r),{},{id:c,isAvailable:!0})),e(!1)})).catch((function(e){console.error("Error adding document: ",e)}))}(u,O,h),n(!1)},style:{display:"flex",flexDirection:"column"},children:[Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Nom"}),Object(k.jsx)("input",{type:"text",name:"name",label:"Nom",style:{fontSize:18,textAlign:"right"},className:"product-input",value:h.name,onChange:I}),Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Type de Vente"}),Object(k.jsxs)("select",(t={id:"list2",selected:!0,value:h.type_de_vente,name:"vente",onChange:function(e){console.log(e.target.value),O(Object(s.a)(Object(s.a)({},h),{},{type_de_vente:e.target.value}))}},Object(p.a)(t,"value",S.value),Object(p.a)(t,"children",[Object(k.jsx)("option",{value:"",children:"Choisir"}),Object(k.jsx)("option",{value:"a_la_piece",children:"A la Pi\xe8ce"}),Object(k.jsx)("option",{value:"au_poids",children:"Au poids"})]),t)),Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Prix/Kilo"}),Object(k.jsx)("input",{type:"number",min:"0",step:"1",name:"prix_au_kilo",label:"Prix au Kilo",style:{fontSize:18,textAlign:"right"},className:"product-input",value:h.prix_au_kilo,onChange:I}),"au_poids"===h.type_de_vente&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Minimum en G"}),Object(k.jsx)("input",{type:"number",min:"0",step:"1",name:"part_value",label:"Une Part =",style:{fontSize:18,textAlign:"right"},className:"product-input",value:h.minimum,onChange:I}),Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Quantit\xe9 Totale en G"}),Object(k.jsx)("input",{type:"number",min:"0",step:"1",name:"quantity",label:"Quantit\xe9 disponible",style:{fontSize:18,textAlign:"right"},className:"product-input",value:h.quantity,onChange:I})]}),"a_la_piece"===h.type_de_vente&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Poids de la Pi\xe8ce"}),Object(k.jsx)("input",{type:"number",min:"0",step:"1",name:"poids_de_la_piece",label:"Poids de la piece",style:{fontSize:18,textAlign:"right"},className:"product-input",value:h.poids_de_la_piece,onChange:I})]}),Object(k.jsx)("div",{children:Object(k.jsxs)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(k.jsx)("button",{style:{color:"black",padding:16,marginBottom:16,marginRight:16},type:"submit",children:"POSTER"}),Object(k.jsx)("button",{className:"input-button",style:{color:"black",padding:16,marginBottom:16,marginLeft:16},onClick:D,children:"Annuler"})]})})]})]})]})})},H=function(e){var t=e.products;console.log(t);var n=Object(c.useState)(!1),r=Object(a.a)(n,2),o=r[0],i=r[1];return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[t&&null!==t[0]&&t.map((function(e,t){return Object(k.jsx)(Q,{product:e},e+t+"key")})),!t&&Object(k.jsx)("p",{children:"loading..."}),!1===o&&Object(k.jsx)("button",{style:{cursor:"pointer",marginTop:36,minWidth:120,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:function(){i(!0)},children:"Ajouter"}),!0===o&&Object(k.jsx)(V,{setShowAddPanel:i})]})},"product-list")},Y=function(e){var t=e.product,n=Object(c.useState)(null),r=Object(a.a)(n,2),o=r[0],i=r[1];var s=Object(c.useCallback)((function(){t.name&&(t.name.length>12?i(300/t.name.length):i(22))}),[t.name]);return Object(c.useEffect)(s,[t.name]),Object(k.jsx)("div",{children:Object(k.jsxs)("div",{onClick:function(){console.log(t)},children:[Object(k.jsx)("h2",{style:{fontSize:o},className:"name",children:t.name}),Object(k.jsxs)("h2",{style:{fontSize:o},className:"name",children:[t.quantity/1e3,"Kg"]}),Object(k.jsxs)("h2",{style:{fontSize:o},className:"name",children:["co\xfbt:",t.price,"\u20ac"]})]})})},X=function(e){var t=e.order,n=Object(c.useState)(!1),r=Object(a.a)(n,2),o=r[0],i=r[1],s=Object(c.useState)(),l=Object(a.a)(s,2),d=l[0],u=l[1];return Object(c.useEffect)((function(){t.id&&g.collection("orders").doc(t.id).collection("products").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data()),console.log(e.id," => ",e.data())})),u(t)}),[]).catch((function(e){console.log("Error getting documents: ",e)}))}),[]),Object(k.jsxs)("div",{style:{padding:"2rem",minWidth:"40%",border:"2px black solid"},children:[Object(k.jsxs)("div",{onClick:function(){i(!o)},style:{cursor:"pointer"},children:[Object(k.jsxs)("h2",{children:["Nom:",t.username]}),Object(k.jsxs)("h2",{children:["Adresse:",t.address]}),Object(k.jsxs)("h2",{children:["Phone: ",t.phone]}),Object(k.jsxs)("h2",{children:["Total: ",t.price,"\u20ac"]}),Object(k.jsxs)("h2",{children:["Command\xe9 le: ",t.date]}),Object(k.jsxs)("h2",{children:["A Livrer:",t.time]})]}),o&&d&&Object(k.jsxs)("div",{children:[d&&void 0!==d[0]&&d.map((function(e,t){return Object(k.jsx)(Y,{product:e},e+t+"key")})),!d&&Object(k.jsx)("p",{children:"loading..."})]}),Object(k.jsx)("button",{style:{cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("orders").doc(t.id).set({status:"delivre"},{merge:!0}).then((function(){i(!1)}));case 2:case"end":return e.stop()}}),e)}))),children:"Not\xe9 comme Livr\xe9"})]})},Z=function(e){var t=e.orders,n=Object(c.useState)(!1),r=Object(a.a)(n,2);r[0],r[1];return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[t&&null!==t[0]&&t.map((function(e,t){return Object(k.jsx)(X,{order:e},e+t+"key")})),!t&&Object(k.jsx)("p",{children:"loading..."})]})},"product-list")},$=function(){var e=Object(c.useContext)(U),t=e.userInfos,n=e.setUserInfos,r=Object(c.useState)([]),o=Object(a.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)([]),d=Object(a.a)(l,2),u=d[0],j=d[1];return console.log(i),console.log(u),Object(c.useEffect)((function(){P(n)}),[]),Object(c.useEffect)((function(){var e=g.collection("products").onSnapshot((function(e){if(e.size){var t=Object(N.a)(i);e.forEach((function(e){t.push(e.data()),console.log(i)})),s(t)}else console.log("EMPTY"),console.log(i)}));return function(){e()}}),[O.a]),Object(c.useEffect)((function(){var e=g.collection("orders").where("status","==","confirmed").onSnapshot((function(e){var t=Object(N.a)(u);e.size?(e.forEach((function(e){t.push(e.data())})),j(t),console.log(u)):console.log("EMPTY")}));return function(){e()}}),[O.a]),Object(k.jsx)("div",{style:{background:"bisque",border:"2px solid black"},children:!0===t.admin&&Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{className:"etal-intro",children:"G\xe9rer Les Produits du Jour"}),t&&Object(k.jsx)(H,{userInfos:t,products:i}),Object(k.jsx)("h2",{className:"etal-intro",children:"Vos Commandes en cours"}),t&&u.length>0&&Object(k.jsx)(Z,{userInfos:t,orders:u})]})})},ee=function(){var e=Object(c.useContext)(U),t=e.userInfos,n=e.setUserInfos,r=Object(c.useState)([]),o=Object(a.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)([]),d=Object(a.a)(l,2),u=d[0],j=d[1],b=Object(c.useState)("initial"),h=Object(a.a)(b,2),p=h[0],m=h[1],f=Object(c.useState)(0),x=Object(a.a)(f,2),v=x[0],y=x[1],w=Object(c.useState)(0),S=Object(a.a)(w,2),C=S[0],I=S[1];return Object(c.useEffect)((function(){P(n)}),[]),console.log(t),Object(c.useEffect)((function(){var e=g.collection("products").onSnapshot((function(e){if(e.size){var t=Object(N.a)(i);e.forEach((function(e){t.push(e.data()),console.log("PRODUCTS SNAPSHOT IN ETAL"),console.log(i)})),!0&&s(t)}else console.log("EMPTY SNAPSHOT IN ETAL"),console.log(i)}));return function(){e()}}),[O.a]),Object(c.useEffect)((function(){var e=function(){};return""!==p&&(e=g.collection("orders").doc(p).collection("products").onSnapshot((function(e){e.forEach((function(e){if(e.exists){console.log("Document data:",e.data());var t=e.data();console.log(t)}else console.log("No such document!")}))}))),function(){e(),!1}}),[O.a]),Object(c.useEffect)((function(){if(console.log("ORDERCYCLE STARTS"),"initial"===p&&""!==t.username){var e=t.username.toString()+Math.floor(1e4*Math.random());m(e.toString())}else console.log("WAITING FOR USERINFOS IN PANIERLIST");return function(){!1}}),[t]),Object(k.jsxs)("div",{className:"etal-container",children:[Object(k.jsxs)("div",{className:"etal-header",children:[Object(k.jsx)("img",{src:_,style:{height:"2rem",marginRight:"1rem"}}),Object(k.jsx)("h2",{children:t.username})]}),!0===t.admin&&Object(k.jsx)($,{}),Object(k.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(k.jsx)(K,{userInfos:t})}),Object(k.jsx)("h2",{className:"etal-intro",children:"Produits du Jour"}),t&&i.length>0&&Object(k.jsx)(L,{setNewOrderAlert:I,setTotalPrice:y,userInfos:t,products:i,order:u,setOrder:j,orderUID:p,setOrderUID:m})||Object(k.jsx)("p",{style:{margin:36},children:"Pas de Produits pour l'instant"}),Object(k.jsx)("h2",{className:"etal-intro",children:"Votre Panier"}),null!==p&&console.log("ORDERUID IN ETAL: "+p.toString()),""!==t.username&&u!==[]&&Object(k.jsx)(B,{newOrderAlert:C,setOrderUID:m,userInfos:t,setTotalPrice:y,totalPrice:v,orderUID:p,order:u,setOrder:j})]})},te=(n(70),function(){var e=Object(c.useState)({error:null,phone:"",email:"",address:"",password:"",username:""}),t=Object(a.a)(e,2),n=t[0],r=t[1];function o(e){r(Object(s.a)(Object(s.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))}function i(){return(i=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(Object(s.a)(Object(s.a)({},n),{},{error:""})),e.prev=2,e.next=5,v(n.email,n.password);case 5:y(n.phone,n.email,n.address,n.password,n.username,f.currentUser.uid),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r(Object(s.a)(Object(s.a)({},n),{},{error:e.t0.message}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return Object(k.jsx)("div",{className:"form-container",children:Object(k.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(k.jsx)("h1",{children:"Sign Up to Chatty Cats"}),Object(k.jsx)("p",{children:"Fill in the form below to create an account."}),Object(k.jsx)("div",{children:Object(k.jsx)("input",{placeholder:"Email",name:"email",type:"email",onChange:o,value:n.email})}),Object(k.jsx)("div",{children:Object(k.jsx)("input",{placeholder:"Nom Pr\xe9nom",name:"username",type:"name",onChange:o,value:n.username})}),Object(k.jsx)("div",{children:Object(k.jsx)("input",{placeholder:"Password",name:"password",onChange:o,value:n.password,type:"password"})}),Object(k.jsx)("div",{children:Object(k.jsx)("input",{placeholder:"T\xe9l\xe9phone",name:"phone",onChange:o,value:n.phone,type:"tel"})}),Object(k.jsx)("div",{children:Object(k.jsx)("input",{placeholder:"1 rue du Gourmet, Saint-Fran\xe7ois",name:"address",onChange:o,value:n.adress,type:"text"})}),n.error?Object(k.jsx)("p",{children:n.error}):null,Object(k.jsx)(S.a.button,{style:{background:"navy",color:"white",border:0,borderRadius:12,paddingTop:8,margin:"0 auto",fontSize:24,cursor:"pointer"},whileHover:{scale:1.2},type:"submit",children:Object(k.jsx)("img",{alt:"sign-up",style:{height:"3rem"},src:_})}),Object(k.jsx)("hr",{}),Object(k.jsxs)("p",{children:["Already have an account? ",Object(k.jsx)(u.b,{to:"/login",children:"Login"})]})]})})});function ne(e){var t=e.component,n=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(k.jsx)(d.b,Object(s.a)(Object(s.a)({},c),{},{render:function(e){return n?Object(k.jsx)(t,Object(s.a)({},e)):Object(k.jsx)(d.a,{to:"/login"})}}))}function ce(e){var t=e.component,n=e.authenticated,c=Object(l.a)(e,["component","authenticated"]);return Object(k.jsx)(d.b,Object(s.a)(Object(s.a)({},c),{},{render:function(e){return n?Object(k.jsx)(d.a,{to:"etal"}):Object(k.jsx)(t,Object(s.a)({},e))}}))}var re=function(){var e=Object(c.useState)({loggedin:!1,loading:!0}),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)({email:"",imageUrl:"",username:""}),i=Object(a.a)(o,2),s=i[0],l=i[1],j=Object(c.useMemo)((function(){return{userInfos:s,setUserInfos:l}}),[s,l]);return Object(c.useEffect)((function(){f.onAuthStateChanged((function(e){r(e?{loggedin:!0,loading:!1}:{loggedin:!1,loading:!1})}))}),[]),Object(k.jsx)(u.a,{children:Object(k.jsx)(d.d,{children:Object(k.jsxs)(U.Provider,{value:j,children:[Object(k.jsx)(d.b,{exact:!0,path:"/",component:D}),Object(k.jsx)(ne,{path:"/etal",authenticated:n.loggedin,component:ee}),Object(k.jsx)(ce,{path:"/signup",authenticated:n.loggedin,component:te}),Object(k.jsx)(ce,{path:"/login",authenticated:n.loggedin,component:C})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(re,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.301d7640.chunk.js.map