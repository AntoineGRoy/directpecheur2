(this.webpackJsonpdirectpecheur2=this.webpackJsonpdirectpecheur2||[]).push([[3],{77:function(e,t,n){"use strict";n.r(t),n.d(t,"Product",(function(){return v}));var r=n(6),i=n(3),c=n(4),s=n(40);var a=n(26),o=n(34),l=0;function u(){var e=l;return l++,e}var d=function(e){var t=e.children,n=e.initial,r=e.isPresent,c=e.onExitComplete,s=e.custom,l=e.presenceAffectsLayout,d=Object(o.a)(j),b=Object(o.a)(u),p=Object(i.useMemo)((function(){return{id:b,initial:n,isPresent:r,custom:s,onExitComplete:function(e){d.set(e,!0);var t=!0;d.forEach((function(e){e||(t=!1)})),t&&(null===c||void 0===c||c())},register:function(e){return d.set(e,!1),function(){return d.delete(e)}}}}),l?void 0:[r]);return Object(i.useMemo)((function(){d.forEach((function(e,t){return d.set(t,!1)}))}),[r]),i.useEffect((function(){!r&&!d.size&&(null===c||void 0===c||c())}),[r]),i.createElement(a.a.Provider,{value:p},t)};function j(){return new Map}var b=n(27);function p(e){return e.key||""}var m=function(e){var t=e.children,n=e.custom,r=e.initial,a=void 0===r||r,o=e.onExitComplete,l=e.exitBeforeEnter,u=e.presenceAffectsLayout,j=void 0===u||u,m=function(){var e=Object(i.useRef)(!1),t=Object(c.c)(Object(i.useState)(0),2),n=t[0],r=t[1];return Object(s.a)((function(){return e.current=!0})),Object(i.useCallback)((function(){!e.current&&r(n+1)}),[n])}(),h=Object(i.useContext)(b.b);Object(b.c)(h)&&(m=h.forceUpdate);var f=Object(i.useRef)(!0),O=function(e){var t=[];return i.Children.forEach(e,(function(e){Object(i.isValidElement)(e)&&t.push(e)})),t}(t),x=Object(i.useRef)(O),y=Object(i.useRef)(new Map).current,v=Object(i.useRef)(new Set).current;if(function(e,t){e.forEach((function(e){var n=p(e);t.set(n,e)}))}(O,y),f.current)return f.current=!1,i.createElement(i.Fragment,null,O.map((function(e){return i.createElement(d,{key:p(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:j},e)})));for(var g=Object(c.e)([],Object(c.c)(O)),_=x.current.map(p),w=O.map(p),k=_.length,S=0;S<k;S++){var E=_[S];-1===w.indexOf(E)?v.add(E):v.delete(E)}return l&&v.size&&(g=[]),v.forEach((function(e){if(-1===w.indexOf(e)){var t=y.get(e);if(t){var r=_.indexOf(e);g.splice(r,0,i.createElement(d,{key:p(t),isPresent:!1,onExitComplete:function(){y.delete(e),v.delete(e);var t=x.current.findIndex((function(t){return t.key===e}));x.current.splice(t,1),v.size||(x.current=O,m(),o&&o())},custom:n,presenceAffectsLayout:j},t))}}})),g=g.map((function(e){var t=e.key;return v.has(t)?e:i.createElement(d,{key:p(e),isPresent:!0,presenceAffectsLayout:j},e)})),x.current=g,i.createElement(i.Fragment,null,v.size?g:g.map((function(e){return Object(i.cloneElement)(e)})))},h=n(76),f=(n(38),n(33)),O=n(29),x=n(2),y=function(e){var t=e.setNewOrderAlert,n=e.setTotalPrice,c=e.product,s=(e.productTotalQuantity,e.setOrderUID,e.orderUID),a=(e.order,e.setOrder,e.userInfos),o=e.detailsAreShown,l=e.setDetailsAreShown,u=(e.containerIsShown,e.setContainerIsShown),d=Object(i.useState)(""),j=Object(r.a)(d,2),b=j[0];j[1];Object(i.useEffect)((function(){c.poids_de_la_piece>0&&y(c.poids_de_la_piece)}),[c]),console.log(s),console.log(a.username);var p=Object(i.useState)(500),m=Object(r.a)(p,2),h=m[0],y=m[1],v=function(e){console.log(h),e.preventDefault();var r=c.prix_au_kilo/1e3*h;Object(O.b)(s,c,a.username,a.id,r,h),Object(O.e)(c.id,h,"minus"),l(!1),u(!1),t((function(e){return e+1})),n((function(e){return e+r}))},g=function(){l(!1),u(!1),y(0)};return Object(x.jsxs)("div",{style:{zIndex:999},className:"product-container ".concat(o?"product-container-expanded":void 0),children:[Object(x.jsxs)("div",{className:"name-container",style:{width:"100%",background:"navy",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(x.jsx)("h3",{style:{color:"white",margin:"16px 32px"},children:c.name}),Object(x.jsx)("div",{className:"close-x",onClick:g,children:"X"})]}),Object(x.jsxs)("div",{style:{color:"white"},children:[Object(x.jsx)("div",{className:"img-container",children:Object(x.jsx)("img",{alt:"avatar-".concat(c.name),style:{cursor:"pointer"},src:c.img_url,className:"avatar"})}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:["Prix au kilo: ",c.prix_au_kilo,"\u20ac","    "]}),"au_poids"===c.type_de_vente&&Object(x.jsxs)("li",{style:{paddingBottom:"16px"},children:["Qantit\xe9 minimum : ",c.minimum,"g"]})]})]}),Object(x.jsxs)("div",{className:"input-button-container",children:["au_poids"===c.type_de_vente&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{style:{padding:"16px",fontSize:16,color:"white"},children:"Quantit\xe9 d\xe9sir\xe9e en grammes"}),Object(x.jsx)("span",{style:{color:"red",padding:b&&8,background:"white"},children:b}),Object(x.jsxs)("form",{onSubmit:v,children:[Object(x.jsx)("input",{type:"number",min:c.minimum,max:c.total_quantity,step:"200",label:"Quantit\xe9 d\xe9sir\xe9e en grammes",style:{fontSize:18,textAlign:"right"},className:"product-input",value:h,onChange:function(e){y(e.target.value)}}),Object(x.jsx)("button",{className:"input-button",type:"submit",children:Object(x.jsx)("img",{style:{height:"2.5rem",width:"2.5rem"},src:f.a})}),Object(x.jsx)("button",{className:"input-button",style:{color:"white"},onClick:g,children:"Annuler"})]})]}),"a_la_piece"===c.type_de_vente&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{style:{width:"100%",color:"white",fontSize:16,textAlign:"center"},children:["Poids de la Pi\xe8ce: ",c.poids_de_la_piece]}),Object(x.jsxs)("div",{className:"input-button",style:{cursor:"pointer",background:"transparent",border:0,borderColor:"transparent",width:"100%",textAlign:"center"},onClick:v,children:[Object(x.jsx)("img",{style:{height:"2.5rem",width:"2.5rem"},src:f.a}),Object(x.jsx)("p",{style:{width:"100%",color:"white",fontSize:16,textAlign:"center"},children:"Confirmer"})]})]})]})]})},v=function(e){var t=e.setNewOrderAlert,n=(e.username,e.userUID,e.detailsAreShown),c=e.setDetailsAreShown,s=e.setTotalPrice,a=e.userInfos,o=e.order,l=e.setOrder,u=e.orderUID,d=e.setOrderUID,j=e.product,b=Object(i.useState)(null),p=Object(r.a)(b,2),f=p[0],O=p[1],v=Object(i.useState)(!1),g=Object(r.a)(v,2),_=g[0],w=g[1];var k=Object(i.useCallback)((function(){j.name&&(j.name.length>12?O(300/j.name.length):O(22))}),[j.name]);return Object(i.useEffect)(k,[j.name]),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{onClick:function(){c(!n),w(!_)},className:"order-container",style:{zIndex:0,pointerEvents:j.quantity<1?"none":"auto",backgroundColor:j.quantity>0?"white":"lightgrey",border:"a_la_piece"===j.type_de_vente?"2px solid darkseagreen":"2px solid skyblue"},children:[Object(x.jsxs)("div",{className:"img-container",children:[Object(x.jsx)("div",{style:{display:"block",position:"absolute",top:0},children:"a_la_piece"===j.type_de_vente?Object(x.jsx)("h3",{style:{background:"honeydew"},children:"A la Pi\xe8ce"}):Object(x.jsx)("h3",{style:{background:"skyblue"},children:"Au Poids"})}),Object(x.jsx)("img",{alt:"avatar-".concat(j.name),style:{cursor:"pointer",filter:j.quantity>0?"none":"grayscale(100%)"},src:j.img_url,className:n?"avatar avatar-reduced":"avatar"})]}),Object(x.jsx)("h2",{style:{fontSize:f},className:"name",children:j.name}),Object(x.jsxs)("h2",{style:{fontSize:f},className:"name",children:[j.prix_au_kilo,"\u20ac/Kg"]}),"a_la_piece"===j.type_de_vente?Object(x.jsxs)("h2",{style:{fontSize:f},className:"name",children:[j.name," de ",j.poids_de_la_piece/1e3,"Kg"]}):Object(x.jsxs)("h2",{style:{fontSize:f},className:"name",children:[j.quantity/1e3,"Kg disponibles!"]})]}),_&&Object(x.jsx)(m,{children:Object(x.jsx)(h.a.div,{initial:{height:0,width:0,position:"absolute",top:0,left:0,transform:"translate(0,0)",opacity:1},animate:{height:"auto",width:"auto",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",opacity:1},exit:{height:0,width:0,position:"absolute",top:0,right:0,transform:"translate(0,0)",opacity:1},style:{zIndex:999},children:Object(x.jsx)(y,{setNewOrderAlert:t,product:j,productTotalQuantity:j.quantity,order:o,setOrder:l,orderUID:u,setOrderUID:d,userInfos:a,detailsAreShown:n,setDetailsAreShown:c,setContainerIsShown:w,containerIsShown:_,setTotalPrice:s})},j.id)})]})}}}]);
//# sourceMappingURL=3.1f01ad08.chunk.js.map